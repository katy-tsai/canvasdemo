(this.webpackJsonpcanvasdemo=this.webpackJsonpcanvasdemo||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(1),i=n.n(a),r=n(28),s=n.n(r),o=n(15),l=n(8),u=n(16),j=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(null),o=Object(u.a)(s,2),l=o[0],j=o[1],h=Object(a.useCallback)((function(e){var t=O(e);t&&(r(!0),j(t))}),[]),d=Object(a.useCallback)((function(){r(!1)}),[]),b=Object(a.useCallback)((function(e){if(i){var t=O(e);l&&t&&(f(l,t),j(t))}}),[i,l]),f=function(t,n){if(e.current){var c=e.current.getContext("2d");c&&(c.strokeStyle="#000",c.lineJoin="round",c.lineWidth=1,c.beginPath(),c.moveTo(t.x,t.y),c.lineTo(n.x,n.y),c.closePath(),c.stroke())}},O=function(t){if(e.current){var n=e.current,c=n.getBoundingClientRect(),a=n.width/c.width,i=n.height/c.height;return{x:(t.pageX-c.left)*a,y:(t.pageY-c.top)*i}}};return Object(a.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("mousedown",h),function(){t.removeEventListener("mousedown",h)}}}),[h]),Object(a.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("mousemove",b),function(){t.removeEventListener("mousemove",b)}}}),[b]),Object(a.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("mouseup",d),t.addEventListener("mouseleave",d),function(){t.removeEventListener("mouseup",d),t.removeEventListener("mouseleave",d)}}}),[d]),Object(c.jsx)("div",{className:"canvas-div",children:Object(c.jsx)("canvas",{ref:e})})},h=(Math.PI,2*Math.PI),d="#f74456",b="#fff",f="#f1da56",O="#036faf",v=200;function x(e,t,n,c,a){a.save(),a.translate(e.x*v,e.y*v),a.fillStyle=t,a.fillRect(0,0,v,v),a.translate(100,100),n(),a.restore()}var m=function(){var e=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=e.current.getContext("2d"),n=0;requestAnimationFrame((function e(){n++;var c=parseInt(n/20);x({x:0,y:0},O,(function(){t.beginPath(),t.arc(0,0,30/(c%3+1),0,h),t.strokeStyle=b,t.lineWidth=13,t.stroke();for(var e=0;e<=8;e++)t.fillStyle=c%8===e?d:b,(e+c)%4!==0&&t.fillRect(60,-4,20,8),t.rotate(h/8)}),0,t),x({x:1,y:0},d,(function(){t.save(),t.scale(.8,.8),t.translate(-60,-60);for(var e=0;e<3;e++){t.save();for(var n=0;n<3;n++)t.beginPath(),t.arc(0,0,20,0,h),t.fillStyle=b,(e+2*n+c)%5===0&&(t.fillStyle=f),t.fill(),t.translate(0,60);t.restore(),t.translate(60,0)}t.restore()}),0,t),x({x:2,y:0},f,(function(){}),0,t),x({x:0,y:1},f,(function(){}),0,t),x({x:1,y:1},b,(function(){}),0,t),x({x:2,y:1},O,(function(){}),0,t),x({x:0,y:2},d,(function(){}),0,t),x({x:1,y:2},O,(function(){}),0,t),x({x:2,y:2},f,(function(){}),0,t),requestAnimationFrame(e)}))}),[]),Object(c.jsx)("div",{className:"nine-gride",children:Object(c.jsx)("canvas",{ref:e,width:600,height:600})})},g=n(18),p=n(43),y=n(44),k=function(e){return Object(c.jsx)("i",{className:"icons",children:Object(c.jsx)(p.a,Object(g.a)({},e))})},w=function(e){return Object(c.jsx)("i",{className:"icons",children:Object(c.jsx)(y.a,Object(g.a)({},e))})},C=function(){return Object(c.jsxs)("ul",{className:"sidebar-div",children:[Object(c.jsx)("div",{className:"sidbar-title",children:"KATY DEMO"}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/",activeClassName:"active",children:[Object(c.jsx)(k,{})," canvas \u756b\u677f"]})}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/nineGrid",activeClassName:"active",children:[Object(c.jsx)(w,{})," \u4e5d\u5bae\u683c"]})}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/reactdnd",activeClassName:"active",children:[Object(c.jsx)(w,{})," React dnd"]})}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/konva_demo",activeClassName:"active",children:[Object(c.jsx)(w,{})," konva demo"]})}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/konva_shape",activeClassName:"active",children:[Object(c.jsx)(w,{})," konva shape demo"]})}),Object(c.jsx)("li",{className:"menu-item",children:Object(c.jsxs)(o.b,{to:"/konva_crop",activeClassName:"active",children:[Object(c.jsx)(w,{})," konva crop demo"]})})]})},N=function(e){var t=e.children;return Object(c.jsxs)("div",{className:"layout-div",children:[Object(c.jsx)("div",{className:"left-div",children:Object(c.jsx)(C,{})}),Object(c.jsx)("div",{className:"right-div",children:t})]})},S=function(){return Object(c.jsx)("div",{children:"dnd"})},E=n(21),L=n(14),P=n(47),R=n.n(P),F=function(){var e=Object(E.a)(),t=e.width,n=e.height,i=e.ref,r=Object(a.useState)(!1),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(a.useState)({}),h=Object(u.a)(j,2),d=h[0],b=h[1],f=Object(a.useRef)(null),O=Object(a.useRef)(null),v=Object(a.useRef)(null),x=Object(a.useRef)(null),m=R()("https://konvajs.github.io/assets/yoda.jpg"),p=Object(u.a)(m,1)[0];Object(a.useEffect)((function(){b({x:0,y:0,width:t,height:n})}),[b,t,n]);return console.log("imgProps",d),console.log("imgref",O.current),Object(c.jsx)("div",{className:"konva-div",ref:i,children:Object(c.jsxs)(L.e,{ref:f,width:t,height:n,onClick:function(e){console.log(f.current.getPointerPosition())},children:[Object(c.jsx)(L.b,{children:Object(c.jsx)(L.a,{ref:O,x:d.x,y:d.y,image:p,opacity:1,width:d.width,height:d.height,onClick:function(e){l(!0),x.current.nodes([O.current]),x.current.getLayer().batchDraw()},draggable:!1,onDragEnd:function(e){b(Object(g.a)(Object(g.a)({},d),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var t=O.current,n=t.scaleX(),c=t.scaleY();t.scaleX(1),t.scaleY(1),b(Object(g.a)(Object(g.a)({},d),{},{x:t.x(),y:t.y(),width:Math.max(5,t.width()*n),height:Math.max(t.height()*c)}))}})}),Object(c.jsxs)(L.b,{globalCompositeOperation:"xor",children:[Object(c.jsx)(L.c,{ref:v,width:d.width,height:d.height,x:d.x,y:d.y,fill:"#fff",opacity:.6,draggable:o,hitFunc:function(e,t){e.rect(0,0,200,200),e.fillStyle="#fff",e.fill(),e.fillStrokeShape(t)}}),o&&Object(c.jsx)(L.f,{ref:x,rotateEnabled:!1,boundBoxFunc:function(e,t){return console.log(e),console.log(t),t.width<5||t.height<5?e:t}})]})]})})},T=function(){var e=Object(E.a)(),t=e.width,n=e.height,i=e.ref,r=Object(a.useRef)(null);return Object(c.jsx)("div",{className:"konva-div",ref:i,children:Object(c.jsx)(L.e,{ref:r,width:t,height:n,children:Object(c.jsx)(L.b,{children:Object(c.jsx)(L.d,{sokeWidth:4,fill:"#00D2FF",stroke:"black",sceneFunc:function(e,t){e.beginPath(),e.moveTo(20,50),e.lineTo(220,80),e.quadraticCurveTo(150,100,260,170),e.closePath(),e.fillStrokeShape(t)},hitFunc:function(e){}})})})})},I=n(50),D=n.n(I),M=n.p+"static/media/u976.a554c54c.png",_=function(){var e=Object(E.a)(),t=e.width,n=e.height,i=e.ref,r=Object(a.useState)({x:10,y:0,aspect:16/9,height:100,keepSelection:!0}),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(a.useState)(null),h=Object(u.a)(j,2),d=h[0],b=h[1],f=Object(a.useRef)(null),O=Object(a.useCallback)((function(e){f.current=e}),[]);return Object(c.jsxs)("div",{className:"konva-div",ref:i,children:[Object(c.jsx)("button",{onClick:function(e){var t=function(e,t){var n=document.createElement("canvas"),c=e.naturalWidth/e.width,a=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*c,t.y*a,t.width*c,t.height*a,0,0,t.width,t.height),n.toDataURL("image/jpeg")}(f.current,d);console.log("cropImg",t)},children:"click"}),Object(c.jsx)("div",{style:{width:"".concat(t,"px"),height:"".concat(n,"px")},children:Object(c.jsx)(D.a,{src:M,crop:o,onImageLoaded:O,onChange:function(e){return l(e)},onComplete:function(e){return b(e)}})})]})};var B=function(){return Object(c.jsx)(N,{children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/",exact:!0,component:j}),Object(c.jsx)(l.a,{path:"/nineGrid",component:m}),Object(c.jsx)(l.a,{path:"/reactdnd",component:S}),Object(c.jsx)(l.a,{path:"/konva_demo",component:F}),Object(c.jsx)(l.a,{path:"/konva_shape",component:T}),Object(c.jsx)(l.a,{path:"/konva_crop",component:_})]})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};n(101);s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(o.a,{basename:"/canvasdemo",children:Object(c.jsx)(B,{})})}),document.getElementById("root")),W()}},[[102,1,2]]]);
//# sourceMappingURL=main.47b91a18.chunk.js.map